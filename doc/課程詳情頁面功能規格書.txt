課程詳情頁面功能規格書

1. 頁面佈局與結構 (Page Structure)

1.1 頂部英雄區 (Hero Section)

課程基本資訊：

麵包屑導航 (Breadcrumbs)：分類 > 子分類 > 課程名稱。

課程標題 (Title)：<h1> 層級。

課程副標題 (Subtitle)：簡短的課程大綱或亮點。

講師資訊：頭像、姓名、連結。

評分統計：平均星等、評價人數、已報名人數。

媒體預覽窗：

預覽影片播放器或課程主圖。

對應 API：GET /api/v1/videos/{id}/stream (若有免費預覽片段)。

1.2 側邊購買懸浮欄 (Sidebar / Sticky Purchase Card)

此元件在 Desktop 版應固定 (Sticky) 於右側，Mobile 版則固定於底部。

售價顯示：優惠價與原價。

行動呼籲 (CTA)：

未購買狀態：顯示「立即購買」與「加入購物車」。

已購買狀態：顯示「開始學習」。

講師身分 (身為此課作者)：顯示「編輯課程」。

課程特點清單：影片總時數、練習檔案、永久觀看權限、行動裝置支援。

1.3 核心內容分頁/區塊 (Main Content Tabs)

課程簡介 (About This Course)：

詳細描述、學習目標、適用對象、軟硬體需求。

課程大綱 (Curriculum)：

展開/收合式手風琴元件 (Accordion)。

顯示章節名稱、單元名稱、影片時數。

標註「預覽」按鈕（若該單元開放免費試看）。

講師簡介 (Instructor Bio)：

詳細經歷、開課清單、總學員數。

學員評價 (Reviews)：

總體評分分佈圖。

留言列表。

2. 元件定義 (Component Specifications)

2.1 課程大綱手風琴 (Curriculum Accordion)

每一節 (Section) 顯示標題與單元數量。

每一單元 (Lesson) 顯示：

圖標：影片播放、文件下載或測驗。

標題與時數。

鎖頭圖標：未購買時顯示。

2.2 評論元件 (Review Item)

顯示學員姓名、評分星等、評價日期、評價內容文字。

3. API 整合邏輯 (API Integration)

3.1 頁面初始化

動作：根據 URL 中的 {id} 調用 GET /api/v1/courses/{id}。

權限檢查：

檢查回傳資料或透過 GET /api/v1/orders 檢查使用者是否已擁有此課程。

根據檢查結果切換「立即購買」或「開始學習」按鈕。

3.2 購買流程

點擊立即購買：

調用 POST /api/v1/orders 建立包含此 ID 的訂單。

導向付款流程 POST /api/v1/orders/{id}/pay。

點擊加入購物車：

將課程 ID 存入前端 LocalStorage 或後端購物車緩存。

3.3 影片預覽

若課程包含預覽單元，點擊時呼叫 GET /api/v1/videos/{id}/stream 獲取 HLS 串流連結。

4. 狀態處理與異常處理 (State & Error Handling)

課程下架 (Course Not Found)：

API 回傳 404 時，顯示「此課程目前已關閉，請查看其他相關課程」。

載入中 (Loading State)：

Hero 區塊與大綱區塊使用骨架屏 (Skeleton)。

已購買狀態 UI 變更：

隱藏價格資訊。

大綱中的鎖頭圖標全部變為播放圖標。

5. 交互行為 (Interactions)

捲動監聽：當使用者向下捲動超過 Hero 區塊時，側邊購買欄位應產生陰影並固定，確保 CTA 按鈕始終可見。

大綱展開控制：預設展開第一章節，其餘章節收合。